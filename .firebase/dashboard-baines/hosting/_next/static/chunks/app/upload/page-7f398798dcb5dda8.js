(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{74069:function(e,a,s){Promise.resolve().then(s.bind(s,40753))},40753:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return u}});var t=s(57437),r=s(8267),l=s(2265),i=s(13287),n=s(17689),d=s(39763);let c=(0,d.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=s(48736);let x=(0,d.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),h=(0,d.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function m(e){let{onUploadComplete:a}=e,[s,r]=(0,l.useState)(!1),[d,m]=(0,l.useState)("idle"),[p,u]=(0,l.useState)(""),y=(0,l.useRef)(null),f=async e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(t){if(!t.name.toLowerCase().endsWith(".csv")){m("error"),u("Please upload a CSV file");return}r(!0),m("idle"),u("");try{let e=new FormData;e.append("file",t);let s=await fetch("/api/upload",{method:"POST",body:e}),r=await s.json();s.ok?(m("success"),u(r.message||"File uploaded and processed successfully!"),a()):(m("error"),u(r.error||"Upload failed"))}catch(e){m("error"),u("Network error. Please try again.")}finally{r(!1)}}};return(0,t.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,t.jsx)(n.Z,{className:"h-5 w-5 text-primary-600"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload New Dataset"})]}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Upload a new CSV file to update the dashboard with fresh data. The file should have the same format as the current dataset."}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 bg-gray-50 p-3 rounded-lg",children:[(0,t.jsx)("strong",{children:"Expected format:"})," CSV file with booking data including columns for Property, Reservation #, Reservation name, Status, Agent, Source, etc."]})]}),(0,t.jsxs)("div",{onDrop:e=>{e.preventDefault();let a=e.dataTransfer.files[0];if(a&&y.current){let e=new DataTransfer;e.items.add(a),y.current.files=e.files,f({target:{files:e.files}})}},onDragOver:e=>{e.preventDefault()},className:"\n          border-2 border-dashed rounded-lg p-8 text-center transition-colors\n          ".concat("success"===d?"border-green-300 bg-green-50":"error"===d?"border-red-300 bg-red-50":"border-gray-300 hover:border-primary-400 hover:bg-primary-50","\n        "),children:[(0,t.jsx)("input",{ref:y,type:"file",accept:".csv",onChange:f,className:"hidden",disabled:s}),s?(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsx)(c,{className:"h-8 w-8 text-primary-600 animate-spin"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Processing file..."})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsx)(o.Z,{className:"h-8 w-8 text-gray-400"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,t.jsx)("button",{onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},className:"text-primary-600 hover:text-primary-700 font-medium",children:"Click to upload"})," ","or drag and drop"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"CSV files only"})]})]})]}),p&&(0,t.jsxs)(i.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-3 rounded-lg flex items-center space-x-2 ".concat("success"===d?"bg-green-50 text-green-800":"error"===d?"bg-red-50 text-red-800":"bg-blue-50 text-blue-800"),children:["success"===d?(0,t.jsx)(x,{className:"h-4 w-4"}):"error"===d?(0,t.jsx)(h,{className:"h-4 w-4"}):null,(0,t.jsx)("span",{className:"text-sm",children:p})]}),(0,t.jsx)("div",{className:"mt-4 text-xs text-gray-500",children:(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Note:"})," Uploading a new file will replace the current dataset and reprocess all data."]})})]})}var p=s(40624);function u(){return(0,t.jsx)(r.Z,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Data Management"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Upload new datasets to update the dashboard with fresh booking data"})]}),(0,t.jsx)(m,{onUploadComplete:()=>{(0,p.m)(),setTimeout(()=>{alert("Dataset updated successfully! All pages will now show the new data.")},1e3)}}),(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Upload Process"}),(0,t.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1",children:[(0,t.jsx)("li",{children:"1. Select or drag your CSV file"}),(0,t.jsx)("li",{children:"2. File is validated and saved as bookingData.csv"}),(0,t.jsx)("li",{children:"3. Python script processes the data and applies business rules"}),(0,t.jsx)("li",{children:"4. New dashboard_data.json is generated"}),(0,t.jsx)("li",{children:"5. All dashboard pages automatically refresh with new data"})]})]}),(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"Important Notes"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1",children:[(0,t.jsx)("li",{children:"• The CSV file must have the same format as the current dataset"}),(0,t.jsx)("li",{children:"• Uploading will replace all current data"}),(0,t.jsx)("li",{children:"• Processing may take 10-30 seconds depending on file size"}),(0,t.jsx)("li",{children:"• All business rules will be applied to the new data"}),(0,t.jsx)("li",{children:"• Charts and tables will update automatically"})]})]})]})})}},8267:function(e,a,s){"use strict";s.d(a,{Z:function(){return u}});var t=s(57437),r=s(13287),l=s(99376),i=s(27648),n=s(25466),d=s(11239),c=s(70525),o=s(29202),x=s(46221),h=s(17689);let m=[{name:"Dashboard",href:"/",icon:n.Z},{name:"Performance",href:"/performance",icon:d.Z},{name:"Revenue",href:"/revenue",icon:c.Z},{name:"Sources",href:"/sources",icon:o.Z},{name:"Analysis",href:"/analysis",icon:x.Z},{name:"Upload Data",href:"/upload",icon:h.Z}];function p(){let e=(0,l.usePathname)();return(0,t.jsxs)(r.E.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white min-h-screen",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-white",children:"Baines River Camp"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Booking Dashboard"})]}),(0,t.jsx)("nav",{className:"p-4 space-y-2",children:m.map(a=>{let s=a.icon,l=e===a.href;return(0,t.jsx)(i.default,{href:a.href,children:(0,t.jsxs)(r.E.div,{whileHover:{x:4},whileTap:{scale:.98},className:"\n                  flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors\n                  ".concat(l?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white","\n                "),children:[(0,t.jsx)(s,{className:"h-5 w-5"}),(0,t.jsx)("span",{className:"font-medium",children:a.name})]})},a.name)})}),(0,t.jsx)("div",{className:"absolute bottom-0 w-64 p-4 border-t border-gray-700",children:(0,t.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,t.jsx)("p",{children:"Last Updated:"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Check dashboard"})]})})]})}function u(e){let{children:a}=e;return(0,t.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,t.jsx)(p,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col ml-64",children:[(0,t.jsx)(r.E.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Real-time Analytics Dashboard"})}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Live Data"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-primary-600",children:"\uD83D\uDCCA Dashboard Active"})]})]})})}),(0,t.jsx)("main",{className:"flex-1 p-6",children:a}),(0,t.jsx)("footer",{className:"border-t border-gray-200 bg-white py-6 px-6",children:(0,t.jsx)("div",{className:"text-center text-sm text-gray-600",children:(0,t.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Baines River Camp - Booking Dashboard"]})})})]})]})}},40624:function(e,a,s){"use strict";s.d(a,{m:function(){return l},p:function(){return r}});var t=s(2265);function r(){let[e,a]=(0,t.useState)(0);return(0,t.useEffect)(()=>{let e=e=>{"dashboard-data-updated"===e.key&&a(e=>e+1)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),e}function l(){localStorage.setItem("dashboard-data-updated",Date.now().toString()),localStorage.removeItem("dashboard-data-updated")}},48736:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(39763).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])}},function(e){e.O(0,[222,971,117,744],function(){return e(e.s=74069)}),_N_E=e.O()}]);