(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{98465:function(e,t,a){Promise.resolve().then(a.bind(a,1662))},1662:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(57437),n=a(2265),r=a(8267),i=a(30638),l=a(65100),c=a(5778),o=a(32122),d=a(57501),m=a(40624);function u(){let[e,t]=(0,n.useState)(null),[a,u]=(0,n.useState)(!0),[x,h]=(0,n.useState)(null),[f,b]=(0,n.useState)("All"),[y,g]=(0,n.useState)("All"),p=(0,m.p)();(0,n.useEffect)(()=>{j()},[p]);let j=async()=>{try{let e=await fetch("/api/data");if(!e.ok)throw Error("Failed to fetch data");let a=await e.json();t(a),u(!1)}catch(e){e instanceof Error?h(e.message):h("An unknown error occurred"),u(!1)}};if(a)return(0,s.jsx)(r.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading revenue data..."})]})})});if(x||!e)return(0,s.jsx)(r.Z,{children:(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-red-600 mb-4",children:"Error loading data"})})})});let v=(0,d.p)(e,f,y);return(0,s.jsx)(r.Z,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Revenue Analysis"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Revenue trends and booking status breakdown"})]}),(0,s.jsx)(i.Z,{statusFilter:f,classFilter:y,onStatusFilterChange:b,onClassFilterChange:g}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(l.Z,{data:v.revenue_trends||e.revenue_trends}),(0,s.jsx)(c.Z,{data:v.by_status})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,s.jsx)(o.Z,{data:v.payment_status||e.payment_status})})]})})}},5778:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var s=a(57437),n=a(47625),r=a(75169),i=a(3574),l=a(20407),c=a(8147),o=a(13287),d=a(48736);function m(e){let{data:t}=e,a=Object.entries(t).map(e=>{let[t,a]=e;return{name:t,value:a.count,revenue:a.revenue}}),m=["#0ea5e9","#10b981","#f59e0b","#ef4444"];return(0,s.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,s.jsx)(d.Z,{className:"h-5 w-5 text-primary-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Booking Status"})]}),(0,s.jsx)(n.h,{width:"100%",height:300,children:(0,s.jsxs)(r.u,{children:[(0,s.jsx)(i.b,{data:a,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:a}=e;return"".concat(t," ").concat((100*a).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:a.map((e,t)=>(0,s.jsx)(l.b,{fill:m[t%m.length]},"cell-".concat(t)))}),(0,s.jsx)(c.u,{})]})})]})}},30638:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(57437),n=a(90740);function r(e){let{statusFilter:t,classFilter:a,onStatusFilterChange:r,onClassFilterChange:i}=e;return(0,s.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.Z,{className:"h-5 w-5 text-primary-600"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),(0,s.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"All",children:"All"}),(0,s.jsx)("option",{value:"Confirmed",children:"Confirmed"}),(0,s.jsx)("option",{value:"Provisional",children:"Provisional"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Class:"}),(0,s.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,s.jsx)("option",{value:"All",children:"All"}),(0,s.jsx)("option",{value:"Income Generating",children:"Income Generating"}),(0,s.jsx)("option",{value:"Non-Income Generating",children:"Non-Income Generating"})]})]})]})]})})}},8267:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var s=a(57437),n=a(13287),r=a(99376),i=a(27648),l=a(25466),c=a(11239),o=a(70525),d=a(29202),m=a(46221),u=a(17689);let x=[{name:"Dashboard",href:"/",icon:l.Z},{name:"Performance",href:"/performance",icon:c.Z},{name:"Revenue",href:"/revenue",icon:o.Z},{name:"Sources",href:"/sources",icon:d.Z},{name:"Analysis",href:"/analysis",icon:m.Z},{name:"Upload Data",href:"/upload",icon:u.Z}];function h(){let e=(0,r.usePathname)();return(0,s.jsxs)(n.E.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},className:"w-64 bg-gradient-to-b from-gray-900 to-gray-800 text-white min-h-screen",children:[(0,s.jsxs)("div",{className:"p-6 border-b border-gray-700",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-white",children:"Baines River Camp"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Booking Dashboard"})]}),(0,s.jsx)("nav",{className:"p-4 space-y-2",children:x.map(t=>{let a=t.icon,r=e===t.href;return(0,s.jsx)(i.default,{href:t.href,children:(0,s.jsxs)(n.E.div,{whileHover:{x:4},whileTap:{scale:.98},className:"\n                  flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors\n                  ".concat(r?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white","\n                "),children:[(0,s.jsx)(a,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"font-medium",children:t.name})]})},t.name)})}),(0,s.jsx)("div",{className:"absolute bottom-0 w-64 p-4 border-t border-gray-700",children:(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[(0,s.jsx)("p",{children:"Last Updated:"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Check dashboard"})]})})]})}function f(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,s.jsx)(h,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col ml-64",children:[(0,s.jsx)(n.E.header,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsx)("div",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Real-time Analytics Dashboard"})}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Live Data"}),(0,s.jsx)("p",{className:"text-sm font-semibold text-primary-600",children:"\uD83D\uDCCA Dashboard Active"})]})]})})}),(0,s.jsx)("main",{className:"flex-1 p-6",children:t}),(0,s.jsx)("footer",{className:"border-t border-gray-200 bg-white py-6 px-6",children:(0,s.jsx)("div",{className:"text-center text-sm text-gray-600",children:(0,s.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Baines River Camp - Booking Dashboard"]})})})]})]})}},32122:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var s=a(57437),n=a(47625),r=a(75169),i=a(3574),l=a(20407),c=a(8147),o=a(22190),d=a(13287),m=a(88226);function u(e){let{data:t}=e,a=[{name:"Fully Paid",value:t.fully_paid},{name:"Partially Paid",value:t.partially_paid},{name:"Unpaid",value:t.unpaid},{name:"Overpaid",value:t.overpaid}].filter(e=>e.value>0),u=["#10b981","#f59e0b","#ef4444","#3b82f6"];return(0,s.jsxs)(d.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,s.jsx)(m.Z,{className:"h-5 w-5 text-primary-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Payment Status"})]}),(0,s.jsx)(n.h,{width:"100%",height:300,children:(0,s.jsxs)(r.u,{children:[(0,s.jsx)(i.b,{data:a,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},outerRadius:80,fill:"#8884d8",dataKey:"value",children:a.map((e,t)=>(0,s.jsx)(l.b,{fill:u[t%u.length]},"cell-".concat(t)))}),(0,s.jsx)(c.u,{}),(0,s.jsx)(o.D,{})]})})]})}},65100:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var s=a(57437),n=a(47625),r=a(21156),i=a(56940),l=a(97059),c=a(62994),o=a(8147),d=a(22190),m=a(54061),u=a(13287),x=a(70525);function h(e){let{data:t}=e,a=Object.entries(t).map(e=>{let[t,a]=e;return{month:t.replace("-"," "),revenue:a.revenue,bookings:a.bookings}}).sort((e,t)=>e.month.localeCompare(t.month));return(0,s.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5 text-primary-600"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Revenue Trends"})]})}),(0,s.jsx)(n.h,{width:"100%",height:300,children:(0,s.jsxs)(r.w,{data:a,margin:{top:5,right:30,left:20,bottom:5},children:[(0,s.jsx)(i.q,{strokeDasharray:"3 3"}),(0,s.jsx)(l.K,{dataKey:"month",tick:{fill:"#6B7280"},style:{fontSize:"12px"}}),(0,s.jsx)(c.B,{tick:{fill:"#6B7280"},style:{fontSize:"12px"},tickFormatter:e=>"$".concat(e.toLocaleString())}),(0,s.jsx)(o.u,{contentStyle:{borderRadius:"8px"},formatter:e=>"$".concat(e.toLocaleString())}),(0,s.jsx)(d.D,{}),(0,s.jsx)(m.x,{type:"monotone",dataKey:"revenue",stroke:"#0ea5e9",strokeWidth:2,dot:{r:4},name:"Revenue"})]})})]})}},57501:function(e,t,a){"use strict";function s(e,t,a){var s,n,r,i;if(!e)return e;let l={...e};if("All"!==t&&"All"!==a){let s=e.yearly_breakdown_combined;if(s){let n=0,r=0,i=0,c=0,o=0,d=0,m=0;Object.keys(s).forEach(e=>{let l=s[e];if(l[a]&&l[a][t]){let e=l[a][t];n+=e.count||0,r+=e.revenue_total||0,i+=e.bed_nights||0,c+=e.pax||0,o+=e.income||0,d+=e.disbursements||0,m+=e.outstanding||0}}),l.summary={...e.summary,total_bookings:n||e.summary.total_bookings,total_revenue:r,total_bed_nights:i,total_pax:c||e.summary.total_pax,total_income:o,total_disbursements:d,total_outstanding:m}}}else if("All"!==a){let t=null===(s=e.by_booking_class)||void 0===s?void 0:s[a];t&&(l.summary={...e.summary,total_bookings:t.count,total_revenue:t.revenue,total_bed_nights:t.bed_nights,total_pax:t.pax,total_income:t.income,total_disbursements:t.disbursements,total_outstanding:t.outstanding})}else if("All"!==t){let a=null===(n=e.by_status)||void 0===n?void 0:n[t];a&&(l.summary={...e.summary,total_bookings:a.count,total_revenue:a.revenue,total_bed_nights:a.bed_nights,total_pax:a.pax,total_income:a.income,total_disbursements:a.disbursements,total_outstanding:a.outstanding})}if("All"!==t){let a=null===(r=e.by_status)||void 0===r?void 0:r[t];a&&(l.by_status={[t]:a})}if("All"!==a){let t=null===(i=e.by_booking_class)||void 0===i?void 0:i[a];t&&(l.by_booking_class={[a]:t})}return l}a.d(t,{p:function(){return s}})},40624:function(e,t,a){"use strict";a.d(t,{p:function(){return n}});var s=a(2265);function n(){let[e,t]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e=e=>{"dashboard-data-updated"===e.key&&t(e=>e+1)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),e}}},function(e){e.O(0,[222,163,156,510,971,117,744],function(){return e(e.s=98465)}),_N_E=e.O()}]);