(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[692],{5229:function(e,t,s){Promise.resolve().then(s.bind(s,16624))},16624:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(57437),a=s(2265),n=s(8267),i=s(30638),l=s(65606),c=s(31798),o=s(57501),d=s(40624);function u(){let[e,t]=(0,a.useState)(null),[s,u]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[m,f]=(0,a.useState)("All"),[j,p]=(0,a.useState)("All"),g=(0,d.p)();(0,a.useEffect)(()=>{y()},[g]);let y=async()=>{try{let e=await fetch("/api/data");if(!e.ok)throw Error("Failed to fetch data");let s=await e.json();t(s),u(!1)}catch(e){e instanceof Error?h(e.message):h("An unknown error occurred"),u(!1)}};if(s)return(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading sources data..."})]})})});if(x||!e)return(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-red-600 mb-4",children:"Error loading data"})})})});let b=(0,o.p)(e,m,j);return(0,r.jsx)(n.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sources & Extras"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Booking sources performance and revenue extras analysis"})]}),(0,r.jsx)(i.Z,{statusFilter:m,classFilter:j,onStatusFilterChange:f,onClassFilterChange:p}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)(l.Z,{data:b.by_source||e.by_source}),(0,r.jsx)(c.Z,{data:b.top_extras||e.top_extras})]})]})})}},31798:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var r=s(57437),a=s(47625),n=s(77031),i=s(56940),l=s(97059),c=s(62994),o=s(8147),d=s(31699),u=s(13287);let x=(0,s(39763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function h(e){let{data:t}=e,s=Object.entries(t).map(e=>{let[t,s]=e;return{name:t.length>25?t.substring(0,25)+"...":t,revenue:s}}).sort((e,t)=>t.revenue-e.revenue);return(0,r.jsxs)(u.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,r.jsx)(x,{className:"h-5 w-5 text-primary-600"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Top Revenue Extras"})]}),(0,r.jsx)(a.h,{width:"100%",height:300,children:(0,r.jsxs)(n.v,{data:s,margin:{top:5,right:30,left:20,bottom:100},children:[(0,r.jsx)(i.q,{strokeDasharray:"3 3"}),(0,r.jsx)(l.K,{dataKey:"name",angle:-45,textAnchor:"end",height:100,tick:{fill:"#6B7280",fontSize:"10px"}}),(0,r.jsx)(c.B,{tick:{fill:"#6B7280"},style:{fontSize:"12px"},tickFormatter:e=>"$".concat(e.toLocaleString())}),(0,r.jsx)(o.u,{contentStyle:{borderRadius:"8px"},formatter:e=>"$".concat(e.toLocaleString())}),(0,r.jsx)(d.$,{dataKey:"revenue",fill:"#f59e0b",radius:[4,4,0,0]})]})})]})}}},function(e){e.O(0,[222,163,710,971,117,744],function(){return e(e.s=5229)}),_N_E=e.O()}]);